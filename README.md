# Image processing service

Этот проект представляет собой веб-приложение на основе **FastAPI** для обработки изображений. Сервис позволяет пользователям загружать изображения, обрабатывать их асинхронно и получать результаты. Также поддерживается регистрация пользователей, аутентификация и доступ к истории задач.

Для изображений имеются следующие преобразования:

- поворот на 90 градусов;
- преобразование из пространства RGB в Space Gray;
- изменение размера изображения в 2 раза с сохранением пропорций;


## Установка и настройка проекта
### Клонируйте репозиторий
```
git clone https://github.com/v0ropaev/image_processing_service.git
cd image_processing_service
```

### Используйте Docker Compose для сборки и запуска контейнеров:
```
docker-compose up -d --build
```
Эта команда собирает образы Docker и запускает контейнеры в фоновом режиме.


### Выполнение миграций базы данных
```
docker-compose exec api sh
alembic upgrade head
```


Эта команда позволяет войти в контейнер и выполнить миграции базы данных.


## Использование API

| Метод | Путь               | Описание                                                            |
| ----- | ------------------ | ------------------------------------------------------------------- |
| POST  | /registration             | Регистрация нового пользователя. (возвращает JWT-токен)                     |
| POST  | /login      | Вход пользователя в систему. (возвращает JWT-токен) |
| POST  | /upload            | Загрузка изображений для обработки.                                       |
| GET   | /status/<id>       | Получение статуса задачи по идентификатору.                     |
| GET   | /get_my_id | Получение уникального идентификатора пользователя.       |
| GET   | /history/<user_id>         | Просмотр истории задач для указанного пользователя.           |
| GET   | /task/<task_id> | Скачивание обработанных изображений в формате zip. |

**Стек:**

- FastAPI
- PostgreSQL
- Celery
- Asyncio
- SQLAlchemy
- Docker/Docker-compose
- Pytest
